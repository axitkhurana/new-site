<!DOCTYPE html>
<html lang='en'><head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='Package Management Systems take care of everything from installation, upgrading, configuring to removing software packages. They are the original &ldquo;Application Stores&rdquo;. RPM is one such package manager used in various distributions like Fedora, CentOS, openSUSE, Mandriva etc.
Packages, in addition to the software and data, also have some meta data with them, such as the version number, license and dependencies.
To create an RPM package, you need the source files and a spec file that has information about your package.'>
<meta name='theme-color' content='#ffcd00'>

<meta property='og:title' content='RPM: Packaging python client • Akshit Khurana'>
<meta property='og:description' content='Package Management Systems take care of everything from installation, upgrading, configuring to removing software packages. They are the original &ldquo;Application Stores&rdquo;. RPM is one such package manager used in various distributions like Fedora, CentOS, openSUSE, Mandriva etc.
Packages, in addition to the software and data, also have some meta data with them, such as the version number, license and dependencies.
To create an RPM package, you need the source files and a spec file that has information about your package.'>
<meta property='og:url' content='https://rl.axitkhurana.com/blog/rpm-packaging-python-client/'>
<meta property='og:site_name' content='Akshit Khurana'>
<meta property='og:type' content='article'><meta property='article:section' content='blog'><meta property='article:published_time' content='2012-11-25T19:12:52Z'/><meta property='article:modified_time' content='2012-11-25T19:12:52Z'/><meta name='twitter:card' content='summary'><meta name='twitter:site' content='@axitkhurana'>

<meta name="generator" content="Hugo 0.55.5" />

  <title>RPM: Packaging python client • Akshit Khurana</title>
  <link rel='canonical' href='https://rl.axitkhurana.com/blog/rpm-packaging-python-client/'>
  
  
  <link rel='icon' href='/favicon.ico'>
<link rel='stylesheet' href='/assets/css/main.fb20af92.css'><link rel='stylesheet' href='/css/custom.css'><style>
:root{--color-accent:#ffcd00;}
</style>

  

</head>
<body class='page type-blog has-sidebar'>

  <div class='site'><div id='sidebar' class='sidebar'>
  <a class='screen-reader-text' href='#main-menu'>Skip to Main Menu</a>

  <div class='container'><section class='widget widget-about sep-after'>
  <header>
    
    <div class='logo'>
      <a href='/'>
        <img src='/images/logo.png'>
      </a>
    </div>
    
    <h2 class='title site-title '>
      <a href='/'>
      Akshit Khurana
      </a>
    </h2>
    <div class='desc'>
    New blog, new you
    </div>
  </header>

</section>
<section class='widget widget-search sep-after'>
  <header>
    <h4 class='title widget-title'>Search</h4>
  </header>

  <form action='/search' id='search-form' class='search-form'>
    <label>
      <span class='screen-reader-text'>Search</span>
      <input id='search-term' class='search-term' type='search' name='q' placeholder='Search&hellip;'>
    </label></form>

</section>
<section class='widget widget-taxonomy_cloud sep-after'>
  <header>
    <h4 class='title widget-title'>Tags</h4>
  </header>

  <div class='container list-container'>
  <ul class='list taxonomy-cloud'><li>
        <a href='/tags/algorithms/' style='font-size:1em'>Algorithms</a>
      </li><li>
        <a href='/tags/blogging/' style='font-size:1em'>Blogging</a>
      </li><li>
        <a href='/tags/braces/' style='font-size:1em'>Braces</a>
      </li><li>
        <a href='/tags/buster/' style='font-size:1em'>Buster</a>
      </li><li>
        <a href='/tags/c/' style='font-size:1em'>C</a>
      </li><li>
        <a href='/tags/c&#43;&#43;/' style='font-size:1em'>C&#43;&#43;</a>
      </li><li>
        <a href='/tags/convocation/' style='font-size:1em'>Convocation</a>
      </li><li>
        <a href='/tags/decorators/' style='font-size:1em'>Decorators</a>
      </li><li>
        <a href='/tags/dutch-national-flag/' style='font-size:1em'>Dutch National Flag</a>
      </li><li>
        <a href='/tags/ghost/' style='font-size:1em'>Ghost</a>
      </li><li>
        <a href='/tags/github/' style='font-size:1em'>Github</a>
      </li><li>
        <a href='/tags/iit-roorkee/' style='font-size:1em'>IIT Roorkee</a>
      </li><li>
        <a href='/tags/internet/' style='font-size:1em'>Internet</a>
      </li><li>
        <a href='/tags/partition/' style='font-size:1em'>Partition</a>
      </li><li>
        <a href='/tags/python/' style='font-size:2em'>Python</a>
      </li><li>
        <a href='/tags/reddit/' style='font-size:1em'>Reddit</a>
      </li><li>
        <a href='/tags/things-i-like/' style='font-size:1em'>Things I like</a>
      </li><li>
        <a href='/tags/whitespace/' style='font-size:1em'>Whitespace</a>
      </li></ul>
</div>


</section>
</div>

  <div class='sidebar-overlay'></div>
</div><div class='main'><nav id='main-menu' class='menu main-menu' aria-label='Main Menu'>
  <div class='container'>
    <a class='screen-reader-text' href='#content'>Skip to Content</a>

<button id='sidebar-toggler' class='sidebar-toggler' aria-controls='sidebar'>
  <span class='screen-reader-text'>Toggle Sidebar</span>
  <span class='open'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="3" y1="12" x2="21" y2="12" />
  <line x1="3" y1="6" x2="21" y2="6" />
  <line x1="3" y1="18" x2="21" y2="18" />
  
</svg>
</span>
  <span class='close'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="18" y1="6" x2="6" y2="18" />
  <line x1="6" y1="6" x2="18" y2="18" />
  
</svg>
</span>
</button>
    <ul><li class='item'>
        <a href='/'>Home</a>
      </li><li class='item'>
        <a href='https://axitkhurana.com'>About</a>
      </li><li class='item'>
        <a href='https://github.com/axitkhurana/rlblog'>Repo</a>
      </li></ul>
  </div>
</nav><div class='header-widgets'>
        <div class='container'></div>
      </div>

      <header id='header' class='header site-header'>
        <div class='container sep-after'>
          <div class='header-info'><p class='site-title title'>Akshit Khurana</p><p class='desc site-desc'>New blog, new you</p>
          </div>
        </div>
      </header>

      <main id='content'>


<article lang='en' class='entry'>
  <header class='header entry-header'>
  <div class='container sep-after'>
    <div class='header-info'>
      <h1 class='title'>RPM: Packaging python client</h1>
      

    </div>
    <div class='entry-meta'>
  <span class='posted-on'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  
</svg>
<span class='screen-reader-text'>Posted on </span>
  <time class='entry-date' datetime='2012-11-25T19:12:52Z'>2012, Nov 25</time>
</span>

  
  
<span class='reading-time'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <circle cx="12" cy="12" r="10"/>
  <polyline points="12 6 12 12 15 15"/>
  
</svg>
3 mins read
</span>


</div>


  </div>
</header>

  
  

  <div class='container entry-content'>
  <p><strong>Package Management Systems </strong>take care of everything from installation, upgrading, configuring to removing software packages. They are the original &ldquo;Application Stores&rdquo;. RPM is one such package manager used in various distributions like Fedora, CentOS, openSUSE, Mandriva etc.</p>
<p>Packages, in addition to the software and data, also have some meta data with them, such as the version number, license and dependencies.</p>
<p>To create an RPM package, you need the source files and a spec file that has information about your package.</p>
<p>A specification file looks like this:</p>
<pre>Name:      popcorn
Version:   0.1
Release:   0
Summary:   Client for popularity contest for RPMs
License:   MIT
Url:       <a href="http://github.com/opensuse/popcorn" target="_blank">http://github.com/opensuse/popcorn</a>
Group:     System/Packages
Source:    %{name}.tar.gz
Requires:  cron, python, rpm-python
BuildRoot: %{_tmppath}/%{name}-%{version}-build
BuildArch: noarch

%description
Popcorn tracks the collection of packages and repositories that users have installed.

%prep
%setup -q -c -n %{name}

%build

%install
install -Dm755 popcorn-client %{buildroot}%{_bindir}/popcorn
install -Dm644 popcorn.conf   %{buildroot}%{_sysconfdir}/popcorn.conf
install -Dm755 popcorn.cron   %{buildroot}%{_sysconfdir}/cron.monthly/popcorn
install -Dm644 popcorn.log %{buildroot}%{_localstatedir}/log/popcorn.log

%clean
rm -rf %{buildroot}

%files
%defattr(-, root, root, -)
%doc README LICENSE
%{_bindir}/popcorn
%config(noreplace) %{_sysconfdir}/popcorn.conf
%config(noreplace) %{_sysconfdir}/cron.monthly/popcorn
%ghost %{_localstatedir}/log/popcorn.log

%changelog
</pre>
<p>Keep your spec file in <code>~/rpmbuild/SPECS </code>directory, and source files in <code>~/rpmbuild/SOURCES </code> directory.</p>
<p>Common tags used in SPEC file:</p>
<ul><li>Name: The name of the package, SPEC file name should match this name. It should follow the <a href="http://en.opensuse.org/openSUSE:Package_naming_guidelines" target="_blank">package naming guidelines</a>.</li>
<li>Version: Version number of your software.</li>
<li>Release: Start from 1 for a version, if a new package is released for the same version of software, increment release number.</li>
<li>Summary: One line summary of the package.</li>
<li>License: The open source license used. E.g. MIT, GPLv2</li>
<li>Url: The project website URL.</li>
<li>Group: Pre existing group for type of software. You can find the list of groups in <code>/usr/share/doc/packages/rpm/GROUPS file on openSUSE. </code></li>
<li>Sources: Name of compressed source file.</li>
<li>Requires: List of packages required to run the software.</li>
<li>BuildArch: If the package is architecture independent, mention noarch.</li>
<li>%description: Longer description of the software.</li>
<li>%prep: Commands to prepare the program<em>, </em>e.g. decompressing the source files</li>
<li>%build: Commands for building/compiling source files for installation.</li>
<li>%install: Commands to install the program. This should copy files from buildroot to builddir.[1]</li>
<li>%clean: For cleaning the buildroot directory.</li>
<li>%files: Files to be placed in the binary RPM.</li>
<li>%changelog: Changes in the package.</li>
</ul><p>Use <code>rpmbuild -ba NAME.spec </code>to build the pacakage.</p>
<p>rpmbuild reads the SPEC file and perform the following operations:</p>
<ul><li>unpacks (%prep) sources from source directory to build directory</li>
<li>compiles (%build) files in build directory</li>
<li>%install: reads from build directory, and writes the files to be installed by an end user, in the build root directory.</li>
<li>creates binary rpm, source rpm package reading from build root directory.</li>
</ul><p>RPMs are created in <code>%_rpmdir</code> directory, <code>~/rpmbuild/RPMS/noarch/</code> in this case. Use rpmlint to check common problems in RPM package.</p>
<p>Files included in packaged Popcorn[2] client:</p>
<ol><li>popcorn: the client python script that collects anonymous package usage data and sends to popcorn server.</li>
<li>popcorn.conf: configuration file having basic settings for popcorn.</li>
<li>popcorn.log: log file for data sent to server.</li>
</ol><p><em>Popcorn is an openSUSE project[3] that tracks usage of linux packages.</em></p>
<p><br/>Useful links:</p>
<ul><li><a href="https://fedoraproject.org/wiki/Packaging:RPMMacros" target="_blank">https://fedoraproject.org/wiki/Packaging:RPMMacros</a></li>
<li><a href="http://www.rpm.org/max-rpm/s1-rpm-inside-files-list-directives.html" target="_blank">http://www.rpm.org/max-rpm/s1-rpm-inside-files-list-directives.html</a></li>
</ul><p>[1] Reference: <a href="https://fedoraproject.org/wiki/How_to_create_an_RPM_package" target="_blank">Fedora&rsquo;s Guide for creating an RPM package</a></p>
<p>[2] My <a href="http://www.google-melange.com/gsoc/proposal/review/google/gsoc2012/axitkhurana/3002" target="_blank">GSoC &lsquo;12 Proposal</a> for the project. Thanks <a href="http://mapleoin.eu/" target="_blank">Ionuț Arțăriși</a> for mentoring :)</p>
<p>[3] <a href="https://github.com/opensuse/popcorn" target="_blank">https://github.com/opensuse/popcorn</a></p>

</div>

  
<footer class='entry-footer'>
  <div class='container sep-before'>
  </div>
</footer>


</article>

<nav class='entry-nav'>
  <div class='container'><div class='prev-entry sep-before'>
      <a href='/blog/uuids/'>
        <span aria-hidden='true'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="20" y1="12" x2="4" y2="12"/>
  <polyline points="10 18 4 12 10 6"/>
  
</svg>
 Previous</span>
        <span class='screen-reader-text'>Previous post: </span>UUIDs</a>
    </div><div class='next-entry sep-before'>
      <a href='/blog/our-deepest-fear-is-not-that-we-are-inadequate/'>
        <span class='screen-reader-text'>Next post: </span>Our deepest fear is not that we are inadequate. Our deepest fear is that we are powerful beyond measure. It is our light, not our darkness,...<span aria-hidden='true'>Next <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="4" y1="12" x2="20" y2="12"/>
  <polyline points="14 6 20 12 14 18"/>
  
</svg>
</span>
      </a>
    </div></div>
</nav>




      </main>

      <footer id='footer' class='footer'>
        <div class='container sep-before'><section class='widget widget-social_menu sep-after'><nav aria-label='Social Menu'>
    <ul><li>
        <a href='https://github.com/axitkhurana' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Github account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
  
</svg>
</a>
      </li><li>
        <a href='https://facebook.com/axitkhurana' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Facebook account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/>
  
</svg>
</a>
      </li><li>
        <a href='https://twitter.com/axikhurana' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Twitter account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
  
</svg>
</a>
      </li><li>
        <a href='https://instagram.com/axitkhurana' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Instagram account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="2" y="2" width="20" height="20" rx="5" ry="5"/>
  <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/>
  <line x1="17.5" y1="6.5" x2="17.5" y2="6.5"/>
  
</svg>
</a>
      </li><li>
        <a href='mailto:axitkhurana@gmail.com' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Contact via Email</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
  <polyline points="22,6 12,13 2,6"/>
  
</svg>
</a>
      </li><li>
        <a href='https://linkedin.com/in/axitkhurana' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Linkedin account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/>
  <rect x="2" y="9" width="4" height="12"/>
  <circle cx="4" cy="4" r="2"/>
  
</svg>
</a>
      </li></ul>
  </nav>
</section><div class='copyright'>
  <p> &copy; 2019 AkshitKhurana </p>
</div>

        </div>
      </footer>

    </div>
  </div><script>window.__assets_js_src="/assets/js/"</script>

<script src='/assets/js/main.9e5c4cf4.js'></script><script src='/js/custom.js'></script>

</body>

</html>

